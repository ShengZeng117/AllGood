<div class="left">
    <div id="head">
        {{#with gm}}
        <h1 id="name">{{this.FirstName}} {{this.LastName}}</h1>
        {{#if this.check}}
        <p id="position">General Manager</p>
        {{else}}
        <p id="position">{{this.Department}} Department</p>
        {{/if}}
        {{/with}}
    </div>
    {{#with gm}}
    {{#if this.check}}
    <div id="main">
        <a href="/generalmanager/{{this._id}}/personalpage">
            <div class="sub" id="overview">Overview</div>
        </a>
        <a href="/generalmanager/{{this._id}}/createAccount">
            <div class="sub" id="creatNew">Create Account</div>
        </a>
        <a href="/generalmanager/{{this._id}}/devices">
        <div class="sub" id="datas">Data</div>
        </a>
        <a href="/generalmanager/{{this._id}}/profile">
        <div class="sub" id="profile">Profile</div>
        </a>
        <a href="/generalmanager/{{this._id}}/staff">
        <div class="sub" id="staff">Staff</div>
        </a>
        <a href="/generalmanager/{{this._id}}/department">
        <div class="sub" id="department">Department</div>
        </a>
    </div>
    {{else}}
    <div id="main">
        <a href="/manager/{{this._id}}/personalpage">
            <div class="sub" id="overview">Overview</div>
        </a>
        <a href="/manager/{{this._id}}/createAccount">
            <div class="sub" id="creatNew">Create Account</div>
        </a>
        <a href="/manager/{{this._id}}/devices">
        <div class="sub" id="datas">Data</div>
        </a>
        <a href="/manager/{{this._id}}/profile">
        <div class="sub" id="profile">Profile</div>
        </a>
        <a href="/manager/{{this._id}}/staff">
        <div class="sub" id="staff">Staff</div>
        </a>
    </div>
    {{/if}}
    {{/with}}
    <div id="foot">
        <img src="/picture/logo.png" alt="">
    </div>
</div>

<div class="content" id="depa">
        <form method="post">
        <div id="departmentset">
            <div class="departmentEle" id="headDepa">Department Name </div>
            {{#each DeList}}
            <div class="departmentEle">{{this.DepartmentName}}
            <button class="delet_device" name="deleDe" value="{{this.DepartmentName}}"><img src="/picture/delet.png"></img></button>
            </div>
            {{/each}}
        </div>
        </form>
        <button class="addDepa" id="addDepa">
            <svg xmlns="http://www.w3.org/2000/svg" width="41.609" height="35.387" viewBox="0 0 41.609 35.387">
                <path id="plus" d="M45.109,18.828H28.189V4.5H21.421V18.828H4.5v5.731H21.421V38.887h6.768V24.559H45.109Z"
                    transform="translate(-4 -4)" fill="#52b981" stroke="#52b981" stroke-width="1" />
            </svg>
        </button>

    </div>
<form action="" method="post">
    <div id="a_mask" class="mask"></div>
        <div id="j_formAdd" class="form-add">
            <div class="form-add-title">
                <span>Department Addition</span>
                <div id="j_hideFormAdd">x</div>
            </div>
            <div class="form-item">
                <label class="lb" for="j_txtLesson">Name: </label>
                <input class="txt" type="text" name="adddepart" id="j_txtLesson" placeholder="Please enter department">
            </div>

            <button class="form-submit" id="j_btnAdd">add</button>
    </div>
</form>

<script>
    let mask = document.getElementById('a_mask');
    let formAdd = document.getElementById('j_formAdd');
    document.getElementById('addDepa').onclick = function(){
        formAdd.style.display = "block";
    }
    document.getElementById("j_hideFormAdd").onclick=function(){
        formAdd.style.display="none";
    }
    document.getElementById('j_btnAdd').onclick = function(){
        formAdd.style.display="none";
    }

    let all_a_delDepa = document.getElementsByClassName("delDepar");

    for (var i = 0; i < all_a_delDepa.length; i++) {
        all_a_delDepa[i].onclick = function () {
            var depa_set = this.parentNode.parentNode;
            depa_name = this.parentNode.innerHTML;
        
        
            if (confirm("Do you want to remove this department?")) {
                depa_set.removeChild(this.parentNode);
            };
        };
    };
</script>